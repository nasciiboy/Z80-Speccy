<HTML><HEAD>   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">   <META NAME="Author" CONTENT="Trent Lillehaugen">   <META NAME="GENERATOR" CONTENT="Mozilla/4.01 [en] (Win95; I) [Netscape]">   <TITLE>ASM 86 LESSON 5</TITLE></HEAD><BODY BACKGROUND="gfx/zand.jpg"><CENTER><B><FONT FACE="Times New Roman,Times"><FONT SIZE=+3>L</FONT><FONT SIZE=+2>ESSON</FONT><FONT SIZE=+3>5</FONT><FONT SIZE=+2>:</FONT></FONT></B></CENTER><CENTER><HR WIDTH="100%"></CENTER><FONT SIZE=+1>&nbsp;</FONT>&nbsp;&nbsp; <FONT SIZE=+1>If.. Then.. Elsestatements allow the program to branch off in many different directions.&nbsp;ASM does not support these staments directly, but using CP along with JR/JPyou can acheive the effect.</FONT><CENTER>&nbsp;<IMG SRC="waveline.gif" HEIGHT=16 WIDTH=756></CENTER><CENTER><A NAME="LIST"></A><B><I><FONT COLOR="#000000"><FONT SIZE=+2>Theseare the instructions/ideas that will be covered in this lesson:</FONT></FONT></I></B></CENTER><CENTER><FONT COLOR="#990000"><FONT SIZE=+2><A HREF="lesson5.htm#CALL">CALL</A></FONT></FONT></CENTER><CENTER><FONT COLOR="#990000"><FONT SIZE=+2><A HREF="lesson5.htm#RET">RET</A></FONT></FONT></CENTER><CENTER><FONT COLOR="#990000"><FONT SIZE=+2><A HREF="lesson5.htm#FUNCTIONS">FUNCTIONS</A></FONT></FONT></CENTER>&nbsp;<CENTER><IMG SRC="waveline.gif" HEIGHT=16 WIDTH=756></CENTER><A NAME="CALL"></A><FONT SIZE=+4>CALL</FONT><BR><FONT FACE="Times New Roman,Times"><FONT SIZE=+1>&nbsp; Call allowsyou to jump to a different location in the ASM program, while saving whereit was, so it can return to that location later. (see also <A HREF="lesson5.htm#RET">ret</A>)</FONT></FONT><UL><LI><FONT SIZE=+1>CALL <B><I>cc</I></B>,<I>LABEL&nbsp;</I>&nbsp; (where <B><I>cc</I></B>=c,nc,z,nz,p,m,pe,orpo)</FONT></LI></UL><FONT SIZE=+1>&nbsp; If the condition cc is true then it jumps to the label.&nbsp;CC is OPTIONAL.</FONT><BLOCKQUOTE><TT><FONT SIZE=+1>call _clrLCD&nbsp;&nbsp; ; calls the ROMfunction to clear the LCD</FONT></TT><BR><TT><FONT SIZE=+1>call z,_clrLCD ; only calls the function if the <B>Z</B>eroflag is set</FONT></TT></BLOCKQUOTE><A HREF="lesson5.htm#LIST">back to list of instructions</A><BR><IMG SRC="waveline.gif" HEIGHT=16 WIDTH=756><BR>&nbsp;<A NAME="RET"></A><FONT SIZE=+4>RET</FONT><BR><FONT FACE="Times New Roman,Times"><FONT SIZE=+1>&nbsp; RET, returnspower back to where the last <A HREF="lesson5.htm#CALL">CALL</A> statement was made,or back the TI/OS-SHELL, if no CALLs where made.&nbsp; It's actually similiarto the stack, but it's easier to explain it this way.</FONT></FONT><UL><LI><FONT SIZE=+1><FONT FACE="Times New Roman,Times">RET <B><I>cc</I></B>&nbsp;&nbsp;</FONT>(where <B><I>cc</I></B>=c,nc,z,nz,p,m,pe,or po)</FONT></LI></UL><FONT SIZE=+1>&nbsp;If cc is true then the ret is executed.&nbsp; CC isOPTIONAL</FONT><BR><TT><FONT SIZE=+1>&nbsp;</FONT></TT><BR><A HREF="lesson5.htm#LIST">back to list of instructions</A><BR><IMG SRC="waveline.gif" HEIGHT=16 WIDTH=756><BR>&nbsp;<A NAME="FUNCTIONS"></A><FONT SIZE=+4>FUNCTIONS</FONT><BR><FONT FACE="Times New Roman,Times"><FONT SIZE=+1>&nbsp; Putting theCALL and RET commands together you are given a powerful way to modulateyour programs.&nbsp; You can create functions that perform certain tasks,and even accept input and produce output.</FONT></FONT><BLOCKQUOTE><TT><FONT SIZE=+1>&nbsp; ld a,5</FONT></TT><BR><TT><FONT SIZE=+1>&nbsp; call Add3&nbsp; ; calls our function Add3which adds 3 to the reg. A</FONT></TT><BR><TT><FONT SIZE=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; and stores the new value in B</FONT></TT><BR><TT><FONT SIZE=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;NOW b=a+3, or 8</FONT></TT><BR><TT><FONT SIZE=+1>&nbsp; ld c,b&nbsp;&nbsp;&nbsp;&nbsp; ;c=b, c=8</FONT></TT><BR><TT><FONT SIZE=+1>&nbsp; :</FONT></TT><BR><TT><FONT SIZE=+1>&nbsp; .</FONT></TT><P><TT><FONT SIZE=+1>Add3:</FONT></TT><BR><TT><FONT SIZE=+1>&nbsp; ld b,a&nbsp;&nbsp;&nbsp;&nbsp; ;b=a</FONT></TT><BR><TT><FONT SIZE=+1>&nbsp; inc b&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;</FONT></TT><BR><TT><FONT SIZE=+1>&nbsp; inc b&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;</FONT></TT><BR><TT><FONT SIZE=+1>&nbsp; inc b&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;b=a+3</FONT></TT><BR><TT><FONT SIZE=+1>&nbsp; ret&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;returns control to next line after CALL was made.</FONT></TT></BLOCKQUOTE><TT><FONT SIZE=+1>&nbsp;</FONT></TT><BR><A HREF="lesson5.htm#LIST">back to list of instructions</A><BR><IMG SRC="waveline.gif" HEIGHT=16 WIDTH=756><CENTER><FONT SIZE=+1><A HREF="lesson4.htm">LESSON4</A></FONT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT SIZE=+1><A HREF="z80_home.htm">INDEX</A>&nbsp;&nbsp;&nbsp;&nbsp; </CENTER><CENTER>This is the end of the lesson, I do not gaurantee any correctnessof any statements made above.</CENTER></BODY></HTML>